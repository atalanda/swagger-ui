<!DOCTYPE html>
<html>
<head>
  <title>Swagger UI</title>
  <link href='//fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'/>
  <link href='css/reset.css' media='screen' rel='stylesheet' type='text/css'/>
  <link href='css/screen.css' media='screen' rel='stylesheet' type='text/css'/>
  <link href='css/reset.css' media='print' rel='stylesheet' type='text/css'/>
  <link href='css/screen.css' media='print' rel='stylesheet' type='text/css'/>
  <script type="text/javascript" src="lib/shred.bundle.js"></script>
  <script src='lib/jquery-1.8.0.min.js' type='text/javascript'></script>
  <script src='lib/jquery.slideto.min.js' type='text/javascript'></script>
  <script src='lib/jquery.wiggle.min.js' type='text/javascript'></script>
  <script src='lib/jquery.ba-bbq.min.js' type='text/javascript'></script>
  <script src='lib/handlebars-1.0.0.js' type='text/javascript'></script>
  <script src='lib/underscore-min.js' type='text/javascript'></script>
  <script src='lib/backbone-min.js' type='text/javascript'></script>
  <script src='lib/swagger.js' type='text/javascript'></script>
  <script src='lib/swagger-client.js' type='text/javascript'></script>
  <script src='swagger-ui.js' type='text/javascript'></script>
  <script src='lib/highlight.7.3.pack.js' type='text/javascript'></script>

  <!-- enabling this will enable oauth2 implicit scope support -->
  <script src='lib/swagger-oauth.js' type='text/javascript'></script>
  <script type="text/javascript">
    $(function () {
      var init = function(url) {
        window.swaggerUi = new SwaggerUi({
          url: url,
          dom_id: "swagger-ui-container",
          supportedSubmitMethods: ['get', 'post', 'put', 'delete'],
          onComplete: function(swaggerApi, swaggerUi){
            log("Loaded SwaggerUI");
            $('pre code').each(function(i, e) {
              hljs.highlightBlock(e)
            });
          },
          onFailure: function(data) {
            log("Unable to Load SwaggerUI");
          },
          docExpansion: "none",
          sorter : "alpha"
        });
      };
      var sandbox_url_v2 = "https://sandbox.atalogics.com/api/v2/swagger_doc";
      var sandbox_url_v3 = "https://sandbox.atalogics.com/api/v3/swagger_doc";
      var beta_url_v2 = "https://beta.atalogics.com/api/v2/swagger_doc";
      var beta_url_v3 = "https://beta.atalogics.com/api/v3/swagger_doc";
      var localhost_url_v2 = "http://localhost:3000/api/v2/swagger_doc";
      var localhost_url_v3 = "http://192.168.99.100:3100/api/v3/swagger_doc";
      init(sandbox_url_v2);

      function addApiKeyAuthorization() {
        var key = $('#input_accessToken')[0].value;
        log("key: " + key);
        if(key && key.trim() != "") {
            log("added key " + key);
            key = "bearer " + key;
            window.authorizations.add("Authorization", new ApiKeyAuthorization("Authorization", key, "header"));
        }
      }

      $('#input_accessToken').change(function() {
        addApiKeyAuthorization();
      });

      var hostChanged = function() {
        var url;
        var env = $('#host').val();
        switch (env) {
          case 'sandbox_v2':
            url = sandbox_url_v2;
            break;
          case 'beta_v2':
            url = beta_url_v2;
            break;
          case 'localhost_v2':
            url = localhost_url_v2;
            break;
          case 'sandbox_v3':
            url = sandbox_url_v3;
            break;
          case 'beta_v3':
            url = beta_url_v3;
            break;
          case 'localhost_v3':
            url = localhost_url_v3;
            break;
        }
        window.swaggerUi.updateSwaggerUi({url: url});
      };
      $('#host').change(hostChanged);

      var cnt = 0;
      var appended = false;
      $('body').keyup(function(evt) {
        console.log(evt.keyCode);
        if(evt.keyCode==16) {
          cnt++;
        } else {
          cnt = 0;
        }
        if(cnt >= 5 && !appended) {
          $('#host').append('<option value="localhost_v2" selected>Localhost:3000/api/v2</option>');
          $('#host').append('<option value="localhost_v3" selected>Localhost:3000/api/v3</option>');
          appended = true;
          hostChanged();
        }
      });

      // if you have an apiKey you would like to pre-populate on the page for demonstration purposes...
      /*
        var apiKey = "myApiKeyXXXX123456789";
        $('#input_apiKey').val(apiKey);
        addApiKeyAuthorization();
      */

      window.swaggerUi.load();
  });
  </script>

  <style media="screen">
    #api_selector div, #api_selector input {
      box-sizing: border-box;
    }
    #api_selector input, #api_selector .input {
      margin: 0px !important;
    }
  </style>
</head>

<body class="swagger-section">
<div id='header'>
  <div class="swagger-ui-wrap">
    <a id="logo" href="http://swagger.io">swagger</a>
    <form id='api_selector' style="width: 80%;">
      <div class='input' style="display: none"><input placeholder="http://example.com/api" id="input_baseUrl" name="baseUrl" type="text"/></div>
      <div class='input' style="width: 60%; padding-right: 10px;">
        <input style="width: 100%;" placeholder="Paste in your access_token" id="input_accessToken" name="accessToken" type="text"/>
      </div>
      <div class='input' style="width: 30%; padding-right: 10px;">
        <select id="host" style="width: 100%; vertical-align: sub;">
          <option value="sandbox_v2">Sandbox v2</option>
          <option value="beta_v2">Beta v2</option>
          <option value="sandbox_v3">Sandbox v3</option>
          <option value="beta_v3">Beta v3</option>
        </select>
      </div>
      <div class='input' style="width: 10%">
        <a id="explore" href="#" style="width: 100%;">Refresh</a>
      </div>
    </form>
  </div>
</div>

<div id="message-bar" class="swagger-ui-wrap">&nbsp;</div>
<div id="swagger-ui-container" class="swagger-ui-wrap"></div>
</body>
</html>
